# OCAP format v1.0

Note that `,`, `;`, and newline characters (`\n` and `\r`) are currently disallowed in strings as those are used as delimiters by OCAP format.

## General file format:

```
<header>
<frame>
<frame>
(...)
<frame>
```

## Header format:

`formatVersion,missionName,worldName,author,captureInterval`

* `formatVersion`: float
* `missionName`: string
* `worldName`: string
* `author`: string
* `captureInterval`: int



## Frame format:

`<event>;<event>;<event>;(...);<event>;`

Final semicolon in the frame is unnecessary, but allowed as keeps the capturing algorithm simple.

## Event format:

`eventTypeId,param1,param2,(...),paramN`

## Events:

### SpawnedEvent:  
* eventTypeId: `S`
* params:
  * `entityId`: int
  * `kind`: string
  * `name`: string
  * `group`: string (unit only)
  * `side`: string (unit only)
  * `isPlayer`: int - 1 if true, 0 otherwise (unit only)
  * `isCurator`: int - 1 if true, 0 otherwise (unit only)

### RespawnedEvent: 
* eventTypeId: `R`
* params:
  * `entityId`: int

### DespawnedEvent: 
* eventTypeId: `X`
* params:
  * `entityId`: int

### ConnectedEvent: 
* eventTypeId: `C`
* params:
    * `playerName`: string

### DisconnectedEvent: 
* eventTypeId: `D`
* params:
    * `playerName`: string
        
### MovedEvent: 
* eventTypeId: `M`
* params:
  * `entityId`: int
  * `x`: int - in-game x coordinate in cm
  * `y`: int - in-game y coordinate in cm
  * `r`: int - in-game rotation in degrees

### FiredEvent: 
* eventTypeId: `F`
* params:
  * `shooterId`: int
  * `x`: int - in-game x coordinate of where shot landed in cm 
  * `y`: int - in-game y coordinate of where shot landed in cm 
    

### HitEvent: 
* eventTypeId: `H`
* params:
  * `targetId`: int
  * `shooterId`: int
    

### KilledEvent: 
* eventTypeId: `K`
* params:
  * `targetId`: int
  * `shooterId`: int
    

### GotInEvent: 
* eventTypeId: `I`
* params:
  * `unitId`: int
  * `vehicleId`: int
    

### GotOutEvent: 
* eventTypeId: `O`
* params:
  * `unitId`: int
  * `vehicleId`: int
  
## Example (capture fragment)
```
1.0,Stratis,tempMissionSP,Shakan,1
S,0,Man,Abdul-Mussawir Anwari,Alpha 1-1,EAST,0,0;M,0,29545,60141,182;S,1,Man,Kabir Yusufzai,Alpha 1-1,EAST,0,0;M,1,29362,60248,137;S,2,Man,Habib Wardak,Alpha 1-1,EAST,0,0;M,2,29755,60143,7;S,3,Man,Kabir Haidari,Alpha 1-1,EAST,0,0;M,3,29487,60453,53;S,4,Man,Mufid Amani,Alpha 1-1,EAST,0,0;M,4,29678,60086,138;S,5,Man,Idris Adel,Alpha 1-1,EAST,0,0;M,5,29717,60011,120;S,6,Man,Arif Yousuf,Alpha 1-1,EAST,0,0;M,6,29842,60207,53;S,7,Man,Mufid Masood,Alpha 1-1,EAST,0,0;M,7,29283,60301,303;S,8,Man,Abdul-Qadir Takhtar,Alpha 1-2,EAST,0,0;M,8,29495,60182,190;S,9,Man,Amir Muhtaram,Alpha 1-2,EAST,0,0;M,9,29167,60315,122;S,10,Man,Karim Ahmed-Jan,Alpha 1-2,EAST,0,0;M,10,29751,60059,28;S,11,Man,Qadeer Ahmed-Jan,Alpha 1-2,EAST,0,0;M,11,29260,60318,165;S,12,Man,Ali Kohzad,Alpha 1-2,EAST,0,0;M,12,29598,60305,122;S,13,Man,Abdul-Aziz Amani,Alpha 1-2,EAST,0,0;M,13,29373,60361,205;S,14,Man,Karim Hakimi,Alpha 1-2,EAST,0,0;M,14,29626,60253,50;S,15,Man,Abbas Khoram,Alpha 1-2,EAST,0,0;M,15,29583,60207,300;S,16,Man,Shakan,Alpha 1-1,WEST,1,0;M,16,29410,59794,16;S,17,Man,Paul Santorum,Alpha 1-1,WEST,0,0;M,17,29460,59726,15;S,18,Man,Quinton Wilson,Alpha 1-1,WEST,0,0;M,18,29268,59911,289;S,19,Man,Shawn Williams,Alpha 1-1,WEST,0,0;M,19,29482,59712,129;S,20,Man,Charlie Brown,Alpha 1-1,WEST,0,0;M,20,29153,59950,71;S,21,Man,Dwan O'Sullivan,Alpha 1-1,WEST,0,0;M,21,29557,59679,71;S,22,Man,Geoff Rollins,Alpha 1-1,WEST,0,0;M,22,29160,59859,3;S,23,Man,Matthew Santorum,Alpha 1-1,WEST,0,0;M,23,29618,59724,168;S,24,Man,Jack Evans,Alpha 1-2,WEST,0,0;M,24,29823,59562,0;S,25,Man,Joseph Brown,Alpha 1-2,WEST,0,0;M,25,29850,59641,15;S,26,Man,Oliver Davies,Alpha 1-2,WEST,0,0;M,26,29676,59541,125;S,27,Man,James Brown,Alpha 1-2,WEST,0,0;M,27,29824,59571,203;S,28,Man,Kyle Newton,Alpha 1-2,WEST,0,0;M,28,29729,59616,192;S,29,Man,Matthew Clarke,Alpha 1-2,WEST,0,0;M,29,29978,59515,15;S,30,Man,Ewan Smith,Alpha 1-2,WEST,0,0;M,30,29845,59562,267;S,31,Man,Ryan Spiegelman,Alpha 1-2,WEST,0,0;M,31,29884,59460,64;F,5,29688,59816;F,5,29587,59609;F,21,29802,60165;H,10,21;F,21,29768,60091;F,5,29524,59381;F,21,34211,60628;F,21,29801,60166;F,5,29526,59330;
M,0,,,178;M,1,29383,60227,133;M,2,29760,60156,22;M,3,29504,60471,67;M,4,29688,60077,129;M,5,,,168;M,6,29865,60198,153;M,7,29284,60315,25;M,9,29179,60308,121;M,10,29757,60071,;M,11,29270,60309,98;M,12,29610,60298,121;M,14,29630,60258,39;M,15,29566,60247,327;M,16,29414,59793,7;M,18,29263,59905,216;M,19,29485,59708,69;M,20,29187,59963,102;M,21,,,49;M,22,29171,59890,19;M,23,29621,59704,137;M,25,29854,59640,108;M,26,29692,59527,134;M,27,29820,59559,200;M,28,29725,59604,196;M,29,,59513,33;M,30,29835,59561,256;M,31,29916,59486,45;F,0,29838,59662;F,0,30037,59508;
M,0,,,173;M,1,29405,60216,102;M,2,29765,60169,;M,3,29512,60472,98;M,4,29698,60067,145;M,5,,,171;M,6,29870,60201,37;M,7,29290,60327,;M,9,29185,60304,;M,10,29761,60078,29;M,11,29282,60315,58;M,12,29612,60297,35;M,13,29367,,283;M,14,29638,60269,29;M,15,29547,60274,5;M,16,29415,59794,359;M,17,29453,59733,261;M,18,29256,59894,211;M,19,29510,59732,26;M,20,29212,59952,108;M,21,29572,59710,33;M,22,29165,59928,303;M,23,,59705,19;M,25,29878,59622,135;M,26,29702,59518,135;M,27,29815,59546,204;M,28,29722,59591,195;M,29,29974,59505,35;M,30,29823,59556,214;M,31,29948,59525,34;F,21,29789,60015;F,20,29518,60228;F,23,29614,59745;H,1,16;F,16,29414,60475;F,21,30135,60572;F,16,29406,60480;F,22,29315,60153;F,23,29462,60150;F,20,29697,60565;F,16,29407,60480;F,21,29717,59984;
M,1,29413,60215,131;M,2,29767,60176,25;M,3,,60473,122;M,4,29703,60056,168;M,6,29878,60220,301;M,7,29293,60333,27;M,9,29197,60297,122;M,10,29767,60090,31;M,11,29294,60320,83;M,12,29605,60304,279;M,13,29337,60381,293;M,14,29643,60282,351;M,15,29559,60289,33;M,16,,,360;M,17,29439,59734,293;M,18,29252,59884,132;M,19,29511,59770,327;M,20,,,65;M,21,29596,59720,53;M,22,29157,59933,9;M,23,29624,59714,359;M,25,29898,59602,;M,26,29712,59508,;M,27,29812,59539,205;M,28,,59584,167;M,29,29972,59503,37;M,30,29816,59544,209;M,31,29980,59547,108;F,1,29707,59386;F,1,29690,59608;F,21,29781,60083;F,1,29738,59255;F,16,29413,60476;F,1,29702,59382;F,1,29763,59203;F,1,29704,59387;F,1,30787,58232;F,16,29414,60476;F,1,29553,59795;F,4,29699,60008;F,6,29810,60119;F,21,29969,60354;F,21,29759,60089;F,18,29646,60560;F,21,29808,60162;F,16,29389,60491;F,5,29551,58805;F,1,29455,60099;H,1,16;F,16,29416,60217;F,1,29455,60099;F,6,29426,59367;
M,2,29773,60188,30;M,3,,,142;M,4,,,171;M,6,,,237;M,7,29295,60338,274;M,9,29209,60289,129;M,10,29776,60100,49;M,11,29301,60319,101;M,13,29307,60400,316;M,14,29633,60289,286;M,15,29586,60332,;M,17,29428,59742,322;M,18,,,55;M,19,29486,59781,297;M,20,,,31;M,21,29606,,47;M,22,,,10;M,25,29907,59592,150;M,26,29723,59500,113;M,27,29806,59526,206;M,28,29729,59570,150;M,29,,,38;M,30,29809,59532,208;M,31,30004,59516,129;F,4,29699,60009;F,5,29526,59415;F,22,29332,60143;F,18,29587,60633;F,1,29501,60132;F,4,29596,59776;F,16,29416,60474;F,5,29527,59380;F,18,29582,60575;F,18,29661,60674;F,1,29702,59381;F,21,29994,60430;F,18,29669,60669;F,5,29547,59403;F,1,30401,59035;F,21,29983,60422;K,1,16,MX 6.5Â mm;F,16,29415,60215;F,5,29546,59389;F,6,29664,59831;F,4,29680,60014;F,5,29601,59585;F,21,29717,59919;F,16,29411,60477;
M,2,,60201,325;M,3,29513,60472,160;M,7,29291,60330,182;M,8,,,245;M,9,,60288,;M,10,29785,60110,74;M,11,29314,60315,118;M,12,29603,60317,21;M,13,29296,60406,329;M,14,29620,60294,296;M,15,29589,60369,321;M,16,,,359;M,17,29423,59755,1;M,19,29474,59780,312;M,20,29219,59950,136;M,21,29608,59719,43;M,22,,,16;M,25,29912,59581,163;M,26,29737,59496,100;M,27,29800,59514,209;M,28,29735,59560,147;M,29,,,40;M,30,29803,59520,207;M,31,30034,59518,22;F,6,29593,59659;F,5,29509,59409;F,16,29407,60480;F,9,29755,59362;F,22,29677,60487;F,6,29457,59427;F,9,29241,60228;F,16,29409,60478;F,6,29444,59430;F,22,29663,60497;F,9,29425,59815;F,9,29402,59829;F,9,30332,58305;
M,2,29763,60210,300;M,3,,,177;M,7,29300,60322,109;M,8,,,273;M,9,,,159;M,10,29789,60112,127;M,11,29321,60307,204;M,12,29612,60345,332;M,13,29295,60407,339;M,14,29609,60299,293;M,15,29558,60392,317;M,16,29418,,360;M,17,,59756,27;M,18,,,54;M,19,29468,59781,337;M,20,29229,59941,128;M,21,,,40;M,25,29914,59570,174;M,26,29750,59498,69;M,27,29793,59502,204;M,28,29742,59557,41;M,29,,,42;M,30,29796,59508,210;M,31,30037,59533,2;F,22,29630,60485;F,6,29405,59373;F,10,30177,59114;F,22,29347,60159;F,9,29322,59908;H,25,10;F,10,29933,59459;F,31,29770,60130;F,22,29640,60527;F,6,29619,59762;F,10,29927,59447;F,9,29298,59944;
M,2,29751,60216,299;M,3,,,189;M,5,,,128;M,7,29313,60316,117;M,8,,,265;M,10,,,139;M,11,29328,60299,121;M,12,29586,60360,285;M,13,,,347;M,14,29604,60301,325;M,15,29526,60405,272;M,16,29425,59803,305;M,18,,,53;M,19,,59780,358;M,20,29240,59933,123;M,21,,,36;M,25,,59567,304;M,26,29759,59502,18;M,27,29790,59489,169;M,28,,59570,353;M,29,,,43;M,30,29789,59496,222;M,31,,59534,;F,9,29464,59745;F,25,29737,59992;F,22,29726,60651;F,10,29869,59683;F,22,29719,60689;F,10,29823,59914;H,5,21;F,21,29718,60011;F,22,29663,60622;F,9,29474,59739;F,23,29695,59998;F,10,29822,59915;F,9,29716,59214;H,4,23;H,4,23;F,23,29708,60073;F,21,29734,60066;
```